<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuzzington's Fun Adventure</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f0fdf4;
            overflow-x: hidden;
        }
        .page-transition {
            transition: all 0.5s ease-in-out;
        }
        .trait-badge {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .animal-icon {
            font-size: 3rem;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header / Progress Area -->
    <div id="app-header" class="bg-white p-4 shadow-md hidden">
        <div class="max-w-4xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-2">
                <span class="text-2xl">ü¶Å</span>
                <div class="h-4 w-48 bg-gray-200 rounded-full overflow-hidden">
                    <div id="progress-fill" class="progress-bar h-full bg-green-500 w-0"></div>
                </div>
            </div>
            <div id="traits-container" class="flex gap-1 overflow-x-auto max-w-[50%]">
                <!-- Trait icons appear here -->
            </div>
        </div>
    </div>

    <!-- Main Content Container -->
    <main id="story-container" class="flex-grow flex items-center justify-center p-4 max-w-4xl mx-auto w-full">
        <!-- Screens are injected here -->
    </main>

    <!-- UI Overlay for Modals/Feedback -->
    <div id="feedback-overlay" class="fixed inset-0 bg-black/60 hidden flex items-center justify-center z-50 p-4">
        <div id="feedback-card" class="bg-white rounded-3xl p-8 max-w-md w-full text-center scale-90 opacity-0 transition-all duration-300">
            <div id="feedback-icon" class="text-6xl mb-4"></div>
            <h2 id="feedback-title" class="text-3xl font-bold mb-2"></h2>
            <p id="feedback-text" class="text-lg text-gray-600 mb-6"></p>
            <button id="feedback-btn" class="bg-green-500 text-white px-8 py-3 rounded-full text-xl font-bold hover:bg-green-600 active:scale-95 transition-transform">
                Keep Going!
            </button>
        </div>
    </div>

    <script>
        const storyData = [
            {
                type: 'intro',
                title: 'Kingdom of Paz',
                text: "Meet Fuzzington! He lives in the beautiful Kingdom of Paz. But his dad, Heshima, has lost his voice to a spell from the evil Lady Hofu. Fuzzington must find the Ny-Gumi plant to save him!",
                image: 'üè∞',
                bgColor: 'bg-green-50'
            },
            {
                name: 'Reindeer',
                icon: 'ü¶å',
                facts: [
                    "Both moms and dads grow antlers!",
                    "Their eyes turn BLUE in the winter to help them see in the dark."
                ],
                question: "The sun is setting! What color must your eyes turn to catch the dim light?",
                options: ["Bright Pink", "Deep Blue"],
                correct: 1,
                reward: "Night Vision",
                rewardIcon: 'üëÅÔ∏è',
                bgColor: 'bg-blue-50'
            },
            {
                name: 'Alpaca',
                icon: 'ü¶ô',
                facts: [
                    "Alpacas 'hum' to talk to their friends.",
                    "They have soft pads on their feet that are very quiet."
                ],
                question: "To sneak past Lady Hofu's guards, do you need noisy hooves or soft pads?",
                options: ["Noisy Hooves", "Soft Pads"],
                correct: 1,
                reward: "Silent Step",
                rewardIcon: 'üë£',
                bgColor: 'bg-orange-50'
            },
            {
                name: 'Capybara',
                icon: 'üêπ',
                facts: [
                    "They are the world's largest rodents!",
                    "They have webbed feet to help them swim."
                ],
                question: "A river blocks your path! What helps a Capybara paddle through the water?",
                options: ["Webbed Feet", "A Life Jacket"],
                correct: 0,
                reward: "Expert Swimmer",
                rewardIcon: 'üèä',
                bgColor: 'bg-teal-50'
            },
            {
                name: 'Polar Bear',
                icon: 'üêª‚Äç‚ùÑÔ∏è',
                facts: [
                    "Their fur is actually clear, not white!",
                    "Beneath the fur, their skin is jet BLACK to soak up the sun's heat."
                ],
                question: "It's getting cold! What color is a Polar Bear's skin to help it stay warm?",
                options: ["White", "Black"],
                correct: 1,
                reward: "Sun-Warmth",
                rewardIcon: '‚òÄÔ∏è',
                bgColor: 'bg-indigo-50'
            },
            {
                name: 'King Crab',
                icon: 'ü¶Ä',
                facts: [
                    "They have thick, spiky shells that look like bumpy strawberries.",
                    "They use giant claws to climb underwater rocks."
                ],
                question: "Sharp thorns are in the way! What does a King Crab wear to stay safe?",
                options: ["A thick spiky shell", "A wool sweater"],
                correct: 0,
                reward: "Spiky Armor",
                rewardIcon: 'üõ°Ô∏è',
                bgColor: 'bg-red-50'
            },
            {
                name: 'Golden Langur',
                icon: 'üêí',
                facts: [
                    "Their fur changes color with the weather!",
                    "They spend almost their whole lives high in the treetops."
                ],
                question: "Where does the Golden Langur spend its time to stay safe?",
                options: ["In deep caves", "High in treetops"],
                correct: 1,
                reward: "Treetop Leap",
                rewardIcon: 'üå≥',
                bgColor: 'bg-yellow-50'
            },
            {
                name: 'Marble Fox',
                icon: 'ü¶ä',
                facts: [
                    "They have beautiful swirls of black and white fur.",
                    "Foxes can make over 40 sounds, including a giggle!"
                ],
                question: "Can a fox make a giggling sound or only bark?",
                options: ["Only Bark", "Bark and Giggle"],
                correct: 1,
                reward: "Multi-Voice",
                rewardIcon: 'üó£Ô∏è',
                bgColor: 'bg-slate-50'
            },
            {
                name: 'Shoebill Stork',
                icon: 'üê¶',
                facts: [
                    "Their beak is shaped exactly like a giant shoe!",
                    "They can stay still as a statue for hours."
                ],
                question: "To sneak past a monster, how long can a Shoebill stay still?",
                options: ["Only 1 minute", "Several hours"],
                correct: 1,
                reward: "Statue Stillness",
                rewardIcon: 'üóø',
                bgColor: 'bg-cyan-50'
            },
            {
                name: 'Octopus',
                icon: 'üêô',
                facts: [
                    "They have three hearts and blue blood!",
                    "They can change their color and texture in less than a second."
                ],
                question: "How fast can an octopus change its skin to hide?",
                options: ["Less than a second", "A whole day"],
                correct: 0,
                reward: "Shape-Shift",
                rewardIcon: 'üß¨',
                bgColor: 'bg-purple-50'
            },
            {
                name: 'Pangolin',
                icon: 'üõ°Ô∏è',
                facts: [
                    "Their scales are made of the same stuff as your fingernails!",
                    "They roll into an unbreakable ball when scared."
                ],
                question: "What are a Pangolin's scales made of?",
                options: ["Hard Metal", "Keratin"],
                correct: 1,
                reward: "Ball Roll",
                rewardIcon: '‚öΩ',
                bgColor: 'bg-amber-50'
            },
            {
                name: 'Markhor',
                icon: 'üêê',
                facts: [
                    "They have amazing twisting corkscrew horns.",
                    "They are world-class jumpers on rocky mountains."
                ],
                question: "Are Markhors good at jumping across rocky cliffs?",
                options: ["Yes, world-class!", "No, they stay flat"],
                correct: 0,
                reward: "Super Jump",
                rewardIcon: 'ü¶ò',
                bgColor: 'bg-stone-100'
            },
            {
                name: 'Jasiri',
                icon: 'ü¶ú',
                facts: [
                    "Female Satyr Tragopans are masters of hiding in the forest.",
                    "They live high in the misty mountains near the clouds."
                ],
                question: "Jasiri is a master of camouflage. What do her spotted feathers do?",
                options: ["Fly like a plane", "Hide in the forest"],
                correct: 1,
                reward: "Ny-Gumi Plant",
                rewardIcon: 'üåø',
                bgColor: 'bg-emerald-50'
            },
            {
                type: 'outro',
                title: 'Victory!',
                text: "Fuzzington has the Ny-Gumi plant! He races back to Paz, saves his dad Heshima, and the colors return. Lady Hofu is gone... for now. More adventures await!",
                image: '‚ú®',
                bgColor: 'bg-yellow-50'
            }
        ];

        let currentPage = 0;
        let earnedTraits = [];
        const storyContainer = document.getElementById('story-container');
        const header = document.getElementById('app-header');
        const progressFill = document.getElementById('progress-fill');
        const traitsContainer = document.getElementById('traits-container');
        const feedbackOverlay = document.getElementById('feedback-overlay');
        const feedbackCard = document.getElementById('feedback-card');

        function init() {
            renderPage();
        }

        function renderPage() {
            const data = storyData[currentPage];
            storyContainer.innerHTML = '';
            
            // Update Progress
            if (currentPage > 0) {
                header.classList.remove('hidden');
                const progress = ((currentPage) / (storyData.length - 1)) * 100;
                progressFill.style.width = `${progress}%`;
            }

            const pageEl = document.createElement('div');
            pageEl.className = `w-full max-w-2xl p-8 rounded-3xl shadow-xl ${data.bgColor} page-transition border-4 border-white`;

            if (data.type === 'intro' || data.type === 'outro') {
                pageEl.innerHTML = `
                    <div class="text-center">
                        <div class="text-9xl mb-8">${data.image}</div>
                        <h1 class="text-4xl font-bold mb-6 text-green-800">${data.title}</h1>
                        <p class="text-xl leading-relaxed mb-8 text-gray-700">${data.text}</p>
                        <button onclick="nextPage()" class="bg-green-500 text-white px-12 py-4 rounded-full text-2xl font-bold hover:bg-green-600 transition-all active:scale-95 shadow-lg">
                            ${data.type === 'intro' ? 'Start Adventure!' : 'The End'}
                        </button>
                    </div>
                `;
            } else {
                pageEl.innerHTML = `
                    <div class="flex items-center gap-4 mb-6">
                        <span class="animal-icon">${data.icon}</span>
                        <h2 class="text-3xl font-bold text-gray-800">Meeting the ${data.name}</h2>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        ${data.facts.map(fact => `
                            <div class="flex gap-3 bg-white/50 p-4 rounded-2xl border-l-4 border-green-400">
                                <span class="text-xl">‚ú®</span>
                                <p class="text-lg text-gray-700 font-semibold">${fact}</p>
                            </div>
                        `).join('')}
                    </div>

                    <div class="bg-white p-6 rounded-3xl shadow-inner mb-6">
                        <p class="text-xl font-bold mb-4 text-green-900">üéì Test Your Knowledge!</p>
                        <p class="text-lg mb-6 text-gray-700">${data.question}</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            ${data.options.map((opt, idx) => `
                                <button onclick="checkAnswer(${idx})" class="bg-white border-2 border-green-200 p-4 rounded-2xl text-lg font-bold hover:border-green-500 hover:bg-green-50 transition-colors text-left flex items-center gap-3">
                                    <span class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600">${idx === 0 ? 'A' : 'B'}</span>
                                    ${opt}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            storyContainer.appendChild(pageEl);
        }

        window.checkAnswer = function(choice) {
            const data = storyData[currentPage];
            if (choice === data.correct) {
                showFeedback(true, data);
            } else {
                showFeedback(false, data);
            }
        };

        function showFeedback(isCorrect, data) {
            const title = document.getElementById('feedback-title');
            const text = document.getElementById('feedback-text');
            const icon = document.getElementById('feedback-icon');
            const btn = document.getElementById('feedback-btn');

            if (isCorrect) {
                title.innerText = "Fantastic!";
                text.innerText = `You earned the ${data.reward} power! Fuzzington is growing stronger.`;
                icon.innerText = "‚≠ê";
                btn.onclick = () => {
                    addTrait(data.rewardIcon, data.reward);
                    hideFeedback();
                    nextPage();
                };
            } else {
                title.innerText = "Oops!";
                text.innerText = "Let's try that again. Remember the fun facts we just read!";
                icon.innerText = "üí≠";
                btn.onclick = hideFeedback;
            }

            feedbackOverlay.classList.remove('hidden');
            setTimeout(() => {
                feedbackCard.classList.remove('scale-90', 'opacity-0');
            }, 10);
        }

        function hideFeedback() {
            feedbackCard.classList.add('scale-90', 'opacity-0');
            setTimeout(() => {
                feedbackOverlay.classList.add('hidden');
            }, 300);
        }

        function addTrait(icon, name) {
            if (earnedTraits.includes(name)) return;
            earnedTraits.push(name);
            const span = document.createElement('span');
            span.className = "trait-badge bg-green-100 p-2 rounded-full text-xl cursor-help";
            span.title = name;
            span.innerText = icon;
            traitsContainer.appendChild(span);
        }

        window.nextPage = function() {
            if (currentPage < storyData.length - 1) {
                currentPage++;
                renderPage();
            } else {
                location.reload(); // Restart
            }
        };

        init();
    </script>
</body>
</html>